import tkinter as tk
from tkinter import messagebox
import requests # Ä°nternet sitelerine baÄŸlanmak iÃ§in
import time

def analiz_et():
    url = giris_url.get()
    
    if not url.startswith("http"):
        url = "https://" + url # EÄŸer kullanÄ±cÄ± yazmazsa biz ekleyelim
    
    try:
        start_time = time.time() # HÄ±z testi baÅŸlangÄ±cÄ±
        yanit = requests.get(url, timeout=10)
        end_time = time.time()
        
        gecikme = round((end_time - start_time) * 1000, 2) # Milisaniye cinsinden hÄ±z
        
        # --- ANALÄ°Z MANTIÄI ---
        durum_kodu = yanit.status_code
        is_secure = url.startswith("https")
        
        # SonuÃ§larÄ± ekrana yazdÄ±ralÄ±m
        sonuc_metni.config(state="normal")
        sonuc_metni.delete(1.0, tk.END)
        
        rapor = f"""
        [ QA GÃœVENLÄ°K VE PERFORMANS RAPORU ]
        ------------------------------------
        ğŸŒ Hedef Site: {url}
        âœ… Durum: {durum_kodu} (Site Aktif)
        âš¡ YanÄ±t HÄ±zÄ±: {gecikme} ms
        ğŸ›¡ï¸ SSL SertifikasÄ±: {"GÃœVENLÄ° (HTTPS)" if is_secure else "RÄ°SKLÄ° (HTTP)"}
        ğŸ“¦ Sunucu Tipi: {yanit.headers.get('Server', 'Bilinmiyor')}
        ------------------------------------
        ANALÄ°Z SONUCU: {"MÃ¼kemmel" if gecikme < 500 and is_secure else "GeliÅŸtirilmeli"}
        """
        sonuc_metni.insert(tk.END, rapor)
        sonuc_metni.config(state="disabled")
        
    except Exception as e:
        messagebox.showerror("BaÄŸlantÄ± HatasÄ±", "Siteye ulaÅŸÄ±lamadÄ±. LÃ¼tfen URL'yi kontrol edin.")

# --- TASARIM KISMI ---
pencere = tk.Tk()
pencere.title("Mete QA Web Analyzer")
pencere.geometry("450x550")
pencere.configure(bg='#0f172a') # Gece mavisi modern tema

# BaÅŸlÄ±k
tk.Label(pencere, text="WEB QA ANALYZER", font=("Courier", 18, "bold"), 
         bg='#0f172a', fg='#38bdf8').pack(pady=20)

# URL GiriÅŸi
tk.Label(pencere, text="Site URL'sini Girin:", bg='#0f172a', fg='white').pack()
giris_url = tk.Entry(pencere, font=("Arial", 12), width=35, justify='center', 
                     relief='flat', bd=5)
giris_url.insert(0, "google.com")
giris_url.pack(pady=10)

# Analiz Butonu
tk.Button(pencere, text="ANALÄ°ZÄ° BAÅLAT", command=analiz_et,
          bg='#38bdf8', fg='#0f172a', font=("Arial", 10, "bold"),
          padx=30, pady=10, relief='flat', cursor='hand2').pack(pady=20)

# SonuÃ§ Metin AlanÄ±
sonuc_metni = tk.Text(pencere, height=12, width=45, font=("Consolas", 10),
                      bg='#1e293b', fg='#f8fafc', state="disabled", padx=10, pady=10)
sonuc_metni.pack(pady=10)

pencere.mainloop()
